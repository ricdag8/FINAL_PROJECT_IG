<!-- üí° Versione con fisica realistica e caricamento corretto della claw -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Claw Machine with Rigid Body Physics</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>


<div id="loadingScreen" class="overlay-screen">
    <h1>Caricamento...</h1>
    <div class="spinner"></div>
</div>


<div id="mainHomepage" class="overlay-screen homepage-container" style="display: none;">
    <div class="homepage-header">
        <h1 class="homepage-title">üïπÔ∏è THE ARCADE ROOM üïπÔ∏è</h1>
        <p class="homepage-subtitle">Welcome to the ultimate arcade experience!</p>
    </div>
    
    <div class="machines-showcase">
        <div class="machine-card">
            <div class="machine-image-container">
                <img class="machine-image" id="clawMachineImg" src="images/claw-machine.jpc" alt="Claw Machine">
            </div>
            <h3 class="machine-title">ü¶æ Claw Machine</h3>
            <p class="machine-description">Test your skills with the classic claw machine!</p>
        </div>
        
        <div class="machine-card">
            <div class="machine-image-container">
                <img class="machine-image" id="candyMachineImg" src="images/candy-machine.jpg" alt="Candy Machine">
            </div>
            <h3 class="machine-title">Candy Machine</h3>
            <p class="machine-description">Satisfy your sweet tooth with delicious treats!</p>
        </div>
        
        <div class="machine-card">
            <div class="machine-image-container">
                <img class="machine-image" id="popcornMachineImg" src="images/popcorn-machine.jpg" alt="Popcorn Machine">
            </div>
            <h3 class="machine-title">Popcorn Machine</h3>
            <p class="machine-description">Fresh, hot popcorn for the perfect snack!</p>
        </div>
    </div>
    
    <div class="homepage-footer">
        <button id="enterArcadeBtn" class="enter-arcade-button">
            <span class="button-text">ENTER THE ARCADE!</span>
            <span class="button-glow"></span>
        </button>
        <p class="footer-text">Click to jump right in!</p>
    </div>
</div>


<div id="characterSelectionScreen" class="overlay-screen" style="display: none; flex-direction: column; justify-content: space-between;">
    <h2 style="margin-top: 60px; margin-bottom: 0; font-size: 3em;">Select a Character</h2>
    <!-- Qui viene renderizzata la scena 3D dei personaggi -->
    <div style="flex: 1;"></div>
    <button id="startGameBtn" class="start-game-button" style="margin-bottom: 60px;">Start Game</button>
</div>


<div id="pauseMenu" class="overlay-screen" style="display: none;">
    <h1>Pausa</h1>
    <div class="menu-buttons">
        <button id="changeCharacterBtn">Cambia Personaggio</button>
        <button id="returnToMainMenuBtn">Torna al Menu Principale</button>
        <button id="resumeBtn">Riprendi</button>
    </div>
</div>

<div id="controls" style="display: none;">
  <strong>Claw Machine</strong><br>
  
  <div style="margin: 8px 0; display: flex; align-items: center; gap: 15px;">
    <div style="color: #ffd700;">
        ü™ô Coins: <span id="coinCounter">5</span>
    </div>
    <div style="color: #ffdd00;">
        ‚≠ê Stars: <span id="starCounter">0</span>
    </div>
  </div>

  <button onclick="newGame()">‚ú® New Game</button>
  
  <div id="gameOverMessage" style="display: none; color: #ff4757; margin-top: 15px; text-align: center;">
    <h2>GAME OVER</h2>
    <p>You won <span id="finalScore">0</span> stars!</p>
  </div>
</div>


<div id="interactionPrompt" style="
  position: absolute;
  bottom: 120px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: white;
  padding: 15px 25px;
  border-radius: 10px;
  font-size: 18px;
  font-weight: bold;
  border: 2px solid #ffd700;
  box-shadow: 0 4px 15px rgba(0,0,0,0.5);
  display: none;
  z-index: 1000;
  text-align: center;
">
  Press <span style="color: #ffd700;">E</span> to interact
</div>


<div id="modeIndicator" style="
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.7);
  color: white;
  padding: 8px 15px;
  border-radius: 15px;
  font-size: 14px;
  font-weight: bold;
  z-index: 1000;
  display: none;
">
  Exploration Mode - WASD to move
</div>


<button id="toggleLightControls" style="display: none;">Lights and walls</button>


<div id="lightControls" style="display: none;">
  <h3 style="margin-top: 0; position: sticky; top: 0; background: rgba(0,0,0,0.9); padding-bottom: 10px; z-index: 10;"> Light Controls</h3>
  

  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="ambientLightPreview" style="background-color: #ffffff;"></div>
      Ambient Light
    </div>
    <input type="color" id="ambientLightColor" value="#ffffff">
    <div class="intensity-control">
      <label>Intensity: <span id="ambientIntensityValue">0.2</span></label>
      <input type="range" id="ambientLightIntensity" min="0" max="1" step="0.05" value="0.2">
    </div>
    <div style="margin-top: 8px;">
      <label>
        <input type="checkbox" id="ambientLightToggle" checked> Enable Ambient Light
      </label>
    </div>
  </div>
  
  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="clawLightPreview" style="background-color: #ff4444;"></div>
      Claw Machine Area
    </div>
    <input type="color" id="clawLightColor" value="#ff4444">
    <div class="intensity-control">
      <label>Intensity: <span id="clawIntensityValue">1.5</span></label>
      <input type="range" id="clawLightIntensity" min="0" max="3" step="0.1" value="1.5">
    </div>
  </div>
  
  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="candyLightPreview" style="background-color: #4444ff;"></div>
      Candy Machine Area
    </div>
    <input type="color" id="candyLightColor" value="#4444ff">
    <div class="intensity-control">
      <label>Intensity: <span id="candyIntensityValue">1.5</span></label>
      <input type="range" id="candyLightIntensity" min="0" max="3" step="0.1" value="1.5">
    </div>
  </div>
  
  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="sideLightPreview" style="background-color: #44ff44;"></div>
      Room Atmosphere
    </div>
    <input type="color" id="sideLightColor" value="#44ff44">
    <div class="intensity-control">
      <label>Intensity: <span id="sideIntensityValue">1.0</span></label>
      <input type="range" id="sideLightIntensity" min="0" max="2" step="0.1" value="1.0">
    </div>
  </div>
  
  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="centerLightPreview" style="background-color: #ffffff;"></div>
      Ceiling Lights
    </div>
    <input type="color" id="centerLightColor" value="#ffffff">
    <div class="intensity-control">
      <label>Intensity: <span id="centerIntensityValue">10.0</span></label>
      <input type="range" id="centerLightIntensity" min="0" max="15" step="0.1" value="10.0">
    </div>
  </div>
  

  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="paintingsLightPreview" style="background-color: #ffffff;"></div>
      Painting Spotlights
    </div>
    <input type="color" id="paintingsLightColor" value="#ffffff">
    <div class="intensity-control">
      <label>Intensity: <span id="paintingsIntensityValue">1.5</span></label>
      <input type="range" id="paintingsLightIntensity" min="0" max="5" step="0.1" value="1.5">
    </div>
  </div>


  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="ledSpeedPreview" style="background: linear-gradient(45deg, #ff0000, #00ff00, #0000ff);"></div>
      Wall LEDs Speed
    </div>
    <div class="intensity-control">
      <label>Speed: <span id="ledSpeedValue">1.0</span>x</label>
      <input type="range" id="ledSpeedControl" min="0.1" max="3.0" step="0.1" value="1.0">
    </div>
  </div>


  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="wallColorPreview" style="background-color: #3a3a3a;"></div>
      Walls & Ceiling
    </div>
    <input type="color" id="wallColorPicker" value="#3a3a3a">
    <div style="margin-top: 8px;">
      <button onclick="resetWallColor()" style="padding: 4px 8px; font-size: 12px;">Reset to Default</button>
    </div>
  </div>


  <div class="light-control">
    <div class="light-name">
      <div class="light-preview" id="floorColorPreview" style="background-color: #2c2c2c;"></div>
      Floor Color
    </div>
    <input type="color" id="floorColorPicker" value="#2c2c2c">
    <div style="margin-top: 8px;">
      <button onclick="resetFloorColor()" style="padding: 4px 8px; font-size: 12px;">Reset to Default</button>
    </div>
  </div>


  <div class="preset-buttons">
    <strong>Presets:</strong><br>
    <button onclick="applyLightPreset('arcade')" style="background: #e74c3c;">üïπÔ∏è Arcade</button>
    <button onclick="applyLightPreset('neon')" style="background: #9b59b6;">üåà Neon</button>
    <button onclick="applyLightPreset('warm')" style="background: #f39c12;">üî• Warm</button>
    <button onclick="applyLightPreset('cool')" style="background: #3498db;">‚ùÑÔ∏è Cool</button>
    <button onclick="applyLightPreset('dark')" style="background: #2c3e50;">üåô Dark</button>
  </div>
  

  <div class="scroll-indicator">
    Scroll for more options
  </div>
</div>

<script async src="https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.js"></script>
<script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.164.1/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.164.1/examples/jsm/"
    }
  }
</script>
<script type="module" src="./main.js"></script>
</body>
</html>